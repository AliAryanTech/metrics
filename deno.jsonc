// TODO(@lowlighter): remove legacy when migrated
{
  "version": "4.0.0",
  "imports": {
    "std/": "https://deno.land/std@0.201.0/",
    "x/": "https://deno.land/x/",
    "y/": "https://esm.sh/",
    "@metrics/": "./source/metrics/",
    "@utils/": "./source/metrics/utils/",
    "@testing": "./source/metrics/utils/testing.ts",
    "@plugin": "./source/metrics/components/plugin.ts",
    "@processor": "./source/metrics/components/processor.ts",
    "@plugins/": "./source/plugins/",
    "@processors/": "./source/processors/"
  },
  "nodeModulesDir": true,
  "tasks": {
    "serve": "$(deno run --allow-env source/run/flags.ts --allow-net=localhost run source/run/server/mod.ts --watch $0)",
    "test": "$(deno run --allow-env source/run/flags.ts test source/run/mod_test.ts $0)",
    "coverage": "rm .coverage -rf && deno task test $0 && deno coverage .coverage",
    "lint": "deno lint",
    "fmt": "deno fmt",
    "hook": "deno task lint && deno task fmt --check && deno task test",
    "deploy": "deployctl deploy --project=metrics --include=source,deno.jsonc,LICENSE --prod source/run/server/mod.ts"
  },
  "lint": {
    "rules": {
      "include": [
        "ban-untagged-todo",
        "default-param-last",
        "eqeqeq",
        "no-const-assign",
        "no-eval",
        "no-sparse-arrays",
        "no-sync-fn-in-async-fn",
        "no-throw-literal"
      ]
    },
    "exclude": ["node_modules", ".legacy"]
  },
  "fmt": {
    "lineWidth": 200,
    "semiColons": false,
    "exclude": ["node_modules", "CODE_OF_CONDUCT.md", ".legacy", ".coverage", ".test"]
  },
  "compilerOptions": {
    "lib": [
      "deno.ns",
      "deno.unstable",
      "dom",
      "dom.asynciterable",
      "dom.iterable"
    ]
  }
}
